# Tmux Configuration for CachyOS Development Environment
# Modern, sensible defaults with mouse support and better keybindings

# ============================================================================
# GENERAL SETTINGS
# ============================================================================

# Change prefix from Ctrl+B to Ctrl+A (easier to reach)
# Uncomment the next 2 lines if you prefer Ctrl+A
# unbind C-b
# set-option -g prefix C-a
# bind-key C-a send-prefix

# Keep default Ctrl+B for now (comment out above if you change)
set-option -g prefix C-b

# Enable mouse support (click to switch panes, resize, etc.)
set -g mouse on

# Start window numbering at 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Increase scrollback buffer size
set -g history-limit 50000

# Display tmux messages for 4 seconds
set -g display-time 4000

# Refresh status bar every 5 seconds
set -g status-interval 5

# Enable focus events (for vim/neovim)
set -g focus-events on

# Enable 256 color support
set -g default-terminal "screen-256color"
# If using tmux 3.2+, use this instead:
# set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# Fix escape delay in vim
set -sg escape-time 10

# ============================================================================
# KEY BINDINGS
# ============================================================================

# Reload config file
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# Split panes using | and - (more intuitive than % and ")
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# New window in current path
bind c new-window -c "#{pane_current_path}"

# Switch panes using Alt+Arrow without prefix
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D

# Switch panes using Vim-style hjkl
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Resize panes using Shift+Arrow
bind -n S-Left resize-pane -L 2
bind -n S-Right resize-pane -R 2
bind -n S-Up resize-pane -U 2
bind -n S-Down resize-pane -D 2

# Kill pane without confirmation
bind x kill-pane

# Kill window without confirmation
bind & kill-window

# ============================================================================
# COPY MODE (Vi-style)
# ============================================================================

# Use vi mode for copy mode
setw -g mode-keys vi

# Vi-style copy/paste
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# Enter copy mode with Ctrl+[
bind [ copy-mode

# Paste with Ctrl+]
bind ] paste-buffer

# ============================================================================
# STATUS BAR
# ============================================================================

# Status bar on top (or change to 'bottom')
set-option -g status-position bottom

# Status bar colors (Catppuccin Mocha theme)
set -g status-style bg=#1e1e2e,fg=#cdd6f4

# Left status: Session name
set -g status-left-length 40
set -g status-left "#[bg=#89b4fa,fg=#1e1e2e,bold] #{session_name} #[bg=#1e1e2e] "

# Right status: Date and time
set -g status-right-length 80
set -g status-right "#[fg=#f38ba8]CPU: #{cpu_percentage} #[fg=#cdd6f4]| #[fg=#a6e3a1]%Y-%m-%d #[fg=#cdd6f4]| #[fg=#89dceb,bold]%H:%M "

# Window status format
set -g window-status-format " #I:#W "
set -g window-status-current-format "#[bg=#89b4fa,fg=#1e1e2e,bold] #I:#W "

# Pane border colors
set -g pane-border-style fg=#45475a
set -g pane-active-border-style fg=#89b4fa

# Message colors
set -g message-style bg=#89b4fa,fg=#1e1e2e,bold

# ============================================================================
# PLUGINS (optional - requires TPM)
# ============================================================================

# To use plugins, install TPM first:
# git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm

# Plugin manager
# set -g @plugin 'tmux-plugins/tpm'
# set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'tmux-plugins/tmux-resurrect'  # Save/restore sessions
# set -g @plugin 'tmux-plugins/tmux-continuum'  # Auto-save sessions
# set -g @plugin 'tmux-plugins/tmux-yank'       # Better copy/paste
# set -g @plugin 'tmux-plugins/tmux-cpu'        # CPU status

# Initialize TPM (keep this at the very bottom)
# run '~/.tmux/plugins/tpm/tpm'

# ============================================================================
# NOTES
# ============================================================================

# Quick reference:
# Prefix = Ctrl+B (or Ctrl+A if you changed it above)
#
# Sessions:
#   Prefix + d          Detach from session
#   Prefix + s          List sessions
#   Prefix + $          Rename session
#
# Windows:
#   Prefix + c          Create new window
#   Prefix + ,          Rename window
#   Prefix + n          Next window
#   Prefix + p          Previous window
#   Prefix + 0-9        Switch to window number
#   Prefix + &          Kill window
#
# Panes:
#   Prefix + |          Split vertically
#   Prefix + -          Split horizontally
#   Prefix + x          Kill pane
#   Prefix + z          Toggle pane zoom
#   Alt + Arrow         Switch panes
#   Shift + Arrow       Resize panes
#
# Copy Mode:
#   Prefix + [          Enter copy mode
#   v                   Begin selection (in copy mode)
#   y                   Copy selection (in copy mode)
#   Prefix + ]          Paste
#
# Other:
#   Prefix + r          Reload config
#   Prefix + ?          List all keybindings
